(this.webpackJsonp=this.webpackJsonp||[]).push([["frosh-platform-avatar"],{"3IDS":function(a,r,t){var o=t("ywCv");"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);(0,t("SZ7m").default)("05194ece",o,!0,{})},"4lkL":function(a){a.exports=JSON.parse('{"global":{"sw-media-upload":{"buttonFroshAvatarGravatarImport":"Import from Gravatar"}}}')},"7RoE":function(a){a.exports=JSON.parse('{"global":{"frosh-media-gravatar-form":{"title":"Import avatar from Gravatar","import":"Import","example":"info@example.com","email":"E-mail","url":"URL","notFoundAlert":"No avatar for email address \\"{email}\\" found","loader":"Waiting for gravatar.com to respond"}}}')},HPiT:function(a,r){a.exports='{% block sw_media_upload_compact_button_context_menu_actions %}\n    {% parent %}\n\n    {% block frosh_avatar_sw_media_upload_compact_button_context_menu_actions_gravatar_import %}\n        <sw-context-menu-item v-if="gravatarEmail" @click="useFroshGravatarImport" class="sw-media-upload__button-frosh-avatar-gravatar-import">\n            {{ $t(\'global.sw-media-upload.buttonFroshAvatarGravatarImport\') }}\n        </sw-context-menu-item>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_media_upload_compact_url_form %}\n    {% parent %}\n\n    {% block frosh_avatar_sw_media_upload_compact_frosh_avatar_gravatar_form %}\n        <frosh-avatar-media-gravatar-form\n            v-if="isFroshAvatarGravatarImport"\n            :email="froshAvatarGravatarEmail"\n            variant="modal"\n            @modal-close="useFileUpload"\n            @media-gravatar-form-submit="onUrlUpload">\n        </frosh-avatar-media-gravatar-form>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_media_upload_regular_header_switch_url_upload %}\n    {% parent %}\n\n    {% block frosh_avatar_sw_media_upload_regular_header_switch_gravatar_import %}\n        <sw-context-menu-item\n            v-if="froshAvatarGravatarEmail && froshAvatarGravatarEmail.length && !isFroshAvatarGravatarImport"\n            @click="useFroshAvatarGravatarImport"\n            class="sw-media-upload__button-gravatar-import">\n            {{ $t(\'global.sw-media-upload.buttonFroshAvatarGravatarImport\') }}\n        </sw-context-menu-item>\n    {% endblock %}\n{% endblock %}\n\n{% block sw_media_upload_regular_actions_add %}\n    {% parent %}\n\n    {% block frosh_avatar_sw_media_upload_regular_actions_gravatar %}\n        <template v-if="isFroshAvatarGravatarImport">\n            <frosh-avatar-media-gravatar-form\n                class="sw-media-upload__frosh-avatar-gravatar-form"\n                variant="inline"\n                :email="froshAvatarGravatarEmail"\n                @frosh-avatar-media-gravatar-form-submit="onUrlUpload">\n            </frosh-avatar-media-gravatar-form>\n        </template>\n    {% endblock %}\n{% endblock %}\n'},KBkr:function(a,r,t){},O1tL:function(a){a.exports=JSON.parse('{"global":{"sw-media-upload":{"buttonFroshAvatarGravatarImport":"Von Gravatar importieren"}}}')},SPdO:function(a,r,t){"use strict";t.r(r);t("wpcu");var o=t("hnZO"),e=t.n(o);const{Component:n}=Shopware;n.register("frosh-avatar-media-gravatar-form",{template:e.a,inject:["FroshPlatformAvatarGravatarService"],props:{variant:{type:String,required:!0,validValues:["modal","inline"],validator:a=>["modal","inline"].includes(a),default:"inline"},email:{type:String,required:!1,default:null}},data:()=>({loading:!1,url:""}),created(){this.loadUrl()},watch:{email(){this.loadUrl()}},computed:{isValid(){return!this.loading&&this.url}},methods:{loadUrl(){this.loading=!0,this.FroshPlatformAvatarGravatarService.requestAvatarUrl(this.email,240).then(a=>{this.url=a,this.loading=!1})},emitUrl(a){this.isValid&&(this.$emit("frosh-avatar-media-gravatar-form-submit",{originalDomEvent:a,url:new URL(this.url),fileExtension:"jpg"}),"modal"===this.variant&&this.closeModal())},closeModal(){this.$emit("modal-close")}}});const{Utils:l}=Shopware,{format:s,string:i}=l,m=i.md5||s.md5;var d=class{constructor(a){this._httpClient=a}requestAvatarUrl(a,r,t,o){r=r||80,t=t||"g",o=o||"404";const e=`https://s.gravatar.com/avatar/${m(a)}`,n={size:r,rating:t,default:o};return this._httpClient.get(e,{params:n}).then(()=>e).catch(()=>Promise.reject(null))}};const{Application:v}=Shopware;v.addServiceProvider("FroshPlatformAvatarGravatarService",()=>{const a=v.getContainer("init");return new d(a.httpClient)});var c={"de-DE":t("ZMFq"),"en-GB":t("7RoE")},f={"de-DE":t("O1tL"),"en-GB":t("4lkL")};const{Locale:u}=Shopware,h=[c,f];for(const a of h)for(const[r,t]of Object.entries(a))u.extend(r,t);t("gVlR"),t("3IDS");var p=t("HPiT"),_=t.n(p);const{Component:g,Utils:b}=Shopware,{types:w}=b;g.override("sw-media-upload",{template:_.a,computed:{isFroshAvatarGravatarImport(){return"frosh-avatar-gravatar-import"===this.inputType},froshAvatarGravatarEmail(){return this.sourceContext&&w.isObject(this.sourceContext)&&this.sourceContext.email&&w.isString(this.sourceContext.email)&&this.sourceContext.email.length?this.sourceContext.email:null}},methods:{useFroshAvatarGravatarImport(){this.inputType="frosh-avatar-gravatar-import"}}})},ZMFq:function(a){a.exports=JSON.parse('{"global":{"frosh-media-gravatar-form":{"title":"Avatar aus Gravatar importieren","import":"Importieren","example":"info@beispiel.de","email":"E-Mail","url":"URL","notFoundAlert":"Es wurde kein Avatar fÃ¼r die E-Mail-Adresse \\"{email}\\" gefunden","loader":"Warten auf Antwort von gravatar.com"}}}')},gVlR:function(a,r){const{Component:t,Utils:o}=Shopware,{types:e}=o;t.override("sw-avatar",{inject:["FroshPlatformAvatarGravatarService"],data:()=>({froshAvatarGravatarImage:null}),watch:{sourceContext(){this.froshAvatarGravatarImage=null,this.loadFroshAvatarGravatar()}},computed:{avatarImage(){const a=this.$super("avatarImage");return a||(this.froshAvatarGravatarImage&&this.froshAvatarGravatarImage.length?{"background-image":`url('${this.froshAvatarGravatarImage}')`}:null)}},mounted(){this.$nextTick(()=>{this.loadFroshAvatarGravatar()})},methods:{loadFroshAvatarGravatar(){if(!(this.sourceContext&&e.isObject(this.sourceContext)&&this.sourceContext.email&&e.isString(this.sourceContext.email)&&this.sourceContext.email.length))return Promise.reject(null);const a=this.sourceContext.email,r=this.size||"80";let t=Number(r.replace(/\D/g,""));return r.indexOf("%")>-1&&(t*=20.48),this.FroshPlatformAvatarGravatarService.requestAvatarUrl(a,Math.floor(t)).then(a=>(this.froshAvatarGravatarImage=a,a))}}})},hnZO:function(a,r){a.exports='{% block frosh_media_gravatar_form %}\n    <sw-modal v-if="variant === \'modal\'"\n              class="frosh-avatar-media-gravatar-form is--modal"\n              variant="small"\n              :title="$t(\'global.frosh-media-gravatar-form.title\')"\n              v-on="$listeners">\n        {% block frosh_media_gravatar_form_loader %}\n            <sw-loader\n                v-if="loading"\n                size="50px">\n                {{ $t(\'global.frosh-media-gravatar-form.loader\') }}\n            </sw-loader>\n        {% endblock %}\n\n        <template v-if="!loading">\n            <template v-if="url">\n                {% block frosh_media_gravatar_form_avatar %}\n                    <sw-avatar\n                        class="frosh-avatar-media-gravatar-form__avatar"\n                        size="240px"\n                        color="transparent"\n                        :imageUrl="url">\n                    </sw-avatar>\n                {% endblock %}\n            </template>\n\n            <template v-else>\n                {% block frosh_media_gravatar_form_not_found_alert %}\n                    <sw-alert\n                        variant="error"\n                        appearance="default"\n                        :showIcon="true"\n                        :closable="false">\n                        {{ $t(\'global.frosh-media-gravatar-form.notFoundAlert\', { email }) }}\n                    </sw-alert>\n                {% endblock %}\n            </template>\n\n            {% block frosh_media_gravatar_form_values %}\n                <sw-description-list\n                    grid="auto 1fr"\n                    class="frosh-avatar-media-gravatar-form__values">\n                    {% block frosh_media_gravatar_form_values_email %}\n                    <dt>\n                            {{ $t(\'global.frosh-media-gravatar-form.email\') }}\n                        </dt>\n                        <dd>\n                            {{ email }}\n                        </dd>\n                    {% endblock %}\n\n                    {% block frosh_media_gravatar_form_values_url %}\n                        <template v-if="url">\n                            <dt>\n                                {{ $t(\'global.frosh-media-gravatar-form.url\') }}\n                            </dt>\n                            <dd>\n                                {{ url }}\n                            </dd>\n                        </template>\n                    {% endblock %}\n                </sw-description-list>\n            {% endblock %}\n        </template>\n\n        {% block frosh_media_gravatar_form_footer %}\n            <template slot="modal-footer">\n                {% block frosh_media_gravatar_form_cancel_button %}\n                    <sw-button size="small" @click="closeModal">\n                        {{ $t(\'global.default.cancel\') }}\n                    </sw-button>\n                {% endblock %}\n\n                {% block frosh_media_gravatar_form_submit_button %}\n                    <sw-button\n                        class="frosh-avatar-media-gravatar-form__submit-button"\n                        variant="primary"\n                        size="small"\n                        :disabled="!isValid"\n                        @click.prevent="emitUrl">\n                        {{ $t(\'global.frosh-media-gravatar-form.import\') }}\n                    </sw-button>\n                {% endblock %}\n            </template>\n        {% endblock %}\n    </sw-modal>\n\n    <div\n        v-else-if="variant === \'inline\'"\n        class="frosh-avatar-media-gravatar-form is--inline">\n        <template v-if="url">\n            {% block frosh_media_gravatar_form_avatar %}\n                <sw-avatar\n                    class="frosh-media-gravatar-form__avatar"\n                    size="96px"\n                    color="transparent"\n                    :imageUrl="url">\n                </sw-avatar>\n            {% endblock %}\n        </template>\n\n        <template v-else>\n            {% block frosh_media_gravatar_form_not_found_alert %}\n                <sw-alert\n                    variant="error"\n                    appearance="default"\n                    :showIcon="true"\n                    :closable="false">\n                    {{ $t(\'global.frosh-media-gravatar-form.notFoundAlert\', { email }) }}\n                </sw-alert>\n            {% endblock %}\n        </template>\n\n        {% block frosh_media_gravatar_form_submit_button %}\n            <sw-button\n                class="frosh-media-gravatar-form__submit-button"\n                size="small"\n                variant="primary"\n                :disabled="!isValid"\n                @click="emitUrl">\n                {{ $t(\'global.frosh-media-gravatar-form.import\') }}\n            </sw-button>\n        {% endblock %}\n    </div>\n{% endblock %}\n'},wpcu:function(a,r,t){var o=t("KBkr");"string"==typeof o&&(o=[[a.i,o,""]]),o.locals&&(a.exports=o.locals);(0,t("SZ7m").default)("4b76f8a4",o,!0,{})},ywCv:function(a,r,t){}},[["SPdO","runtime","vendors-node"]]]);